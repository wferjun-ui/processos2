<Window x:Class="SistemaJuridico.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:vm="clr-namespace:SistemaJuridico.ViewModels"
        Title="Sistema Jurídico Pro" Height="700" Width="1000"
        WindowStartupLocation="CenterScreen" Background="{DynamicResource MaterialDesignPaper}"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}">

    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" Background="White" Effect="{StaticResource MaterialDesignShadowDepth1}">
            <StackPanel Margin="10">
                <TextBlock Text="JURÍDICO" FontSize="24" FontWeight="Bold" Foreground="{StaticResource PrimaryHueMidBrush}" Margin="20,30,0,30"/>
                
                <Button Command="{Binding CarregarDashboardCommand}" Content="DASHBOARD" Style="{StaticResource MaterialDesignFlatButton}" HorizontalContentAlignment="Left" Height="50"/>
                <Button Command="{Binding NovoProcessoCommand}" Content="NOVO PROCESSO" Style="{StaticResource MaterialDesignFlatButton}" HorizontalContentAlignment="Left" Height="50"/>
                
                <Button Command="{Binding AbrirAdminCommand}" Visibility="{Binding AdminVisibility}" 
                        Content="ADMINISTRAÇÃO" Style="{StaticResource MaterialDesignFlatButton}" HorizontalContentAlignment="Left" Height="50" Foreground="Purple"/>

                <Separator Margin="0,20"/>
                <Button Command="{Binding SairCommand}" Content="SAIR" Style="{StaticResource MaterialDesignFlatButton}" HorizontalContentAlignment="Left" Height="50" Foreground="Red"/>
            </StackPanel>
        </Border>

        <Grid Grid.Column="1" Margin="30">
            <Grid.RowDefinitions><RowDefinition Height="Auto"/><RowDefinition Height="*"/></Grid.RowDefinitions>

            <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                <materialDesign:PackIcon Kind="ViewDashboard" Width="30" Height="30" VerticalAlignment="Center"/>
                <TextBlock Text="Painel de Controle" FontSize="24" FontWeight="SemiBold" Margin="10,0,0,0"/>
                
                <TextBox Width="300" Margin="40,0,0,0" materialDesign:HintAssist.Hint="Pesquisar..." Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                <Button Command="{Binding CarregarDashboardCommand}" Content="{materialDesign:PackIcon Magnify}" Style="{StaticResource MaterialDesignIconButton}"/>
            </StackPanel>

            <DataGrid Grid.Row="1" ItemsSource="{Binding Processos}" AutoGenerateColumns="False" IsReadOnly="True" materialDesign:DataGridAssist.CellPadding="10">
                <DataGrid.Columns>
                    <DataGridTemplateColumn Width="50">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Command="{Binding DataContext.AbrirDetalhesCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}" 
                                        CommandParameter="{Binding Id}" Content="Abrir" Height="25" Padding="5,0"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    
                    <DataGridTextColumn Header="Status" Binding="{Binding StatusTexto}" FontWeight="Bold"/>
                    <DataGridTextColumn Header="Processo" Binding="{Binding Numero}"/>
                    <DataGridTextColumn Header="Paciente" Binding="{Binding Paciente}" Width="*"/>
                    <DataGridTextColumn Header="Próx. Prazo" Binding="{Binding DataPrazo}"/>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
    </Grid>
</Window>
